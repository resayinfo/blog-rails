<div class="articles">

  <h1 class="page-header" align="center">Articles</h1>

  <%= render partial: 'articles/search', locals: { q: '' } %>

  <% if @articles.present? %>

    <table>
      <tr>
        <th class="articles-index-table-headlines">Author</th>
        <th class="articles-index-table-headlines">Title</th>
        <!-- <th class="articles-index-table-headlines">Text</th> -->
        <th colspan="2">
          <% if can? :create, Article %>
            <%= link_to 'Create a New Article', new_article_path, class: 'btn btn-success' %>
          <% end %>
        </th>
      </tr>
      <% @articles.each do |article| %>
        <tr>
          <td><%= article.author %></td>
          <td><%= link_to article.title, article_path(article) %></td>
          <!-- <td><%= article.text %></td> -->
          <% if can? :manage, Article %>
            <td><%= link_to 'Edit', edit_article_path(article), class: 'btn btn-default' %></td>
            <td><%= link_to 'Delete', article_path(article) , class: 'btn btn-danger',
                            method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% else %>
            <td></td>
            <td>
              <%= image_tag 'simpsons.png', class:"side-pic" %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </table>

    <script>
    /**
    * uiMorphingButton_fixed.js v1.0.0
    * http://www.codrops.com
    *
    * Licensed under the MIT license.
    * http://www.opensource.org/licenses/mit-license.php
    *
    * Copyright 2014, Codrops
    * http://www.codrops.com
    */
    ;( function( window ) {

      'use strict';

      var transEndEventNames = {
        'WebkitTransition': 'webkitTransitionEnd',
        'MozTransition': 'transitionend',
        'OTransition': 'oTransitionEnd',
        'msTransition': 'MSTransitionEnd',
        'transition': 'transitionend'
      },
      transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],
      support = { transitions : Modernizr.csstransitions };

      function extend( a, b ) {
        for( var key in b ) {
          if( b.hasOwnProperty( key ) ) {
            a[key] = b[key];
          }
        }
        return a;
      }

      function UIMorphingButton( el, options ) {
        this.el = el;
        this.options = extend( {}, this.options );
        extend( this.options, options );
        this._init();
      }

      UIMorphingButton.prototype.options = {
        closeEl : '',
        onBeforeOpen : function() { return false; },
        onAfterOpen : function() { return false; },
        onBeforeClose : function() { return false; },
        onAfterClose : function() { return false; }
      }

      UIMorphingButton.prototype._init = function() {
        // the button
        this.button = this.el.querySelector( 'button' );
        // state
        this.expanded = false;
        // content el
        this.contentEl = this.el.querySelector( '.morph-content' );
        // init events
        this._initEvents();
      }

      UIMorphingButton.prototype._initEvents = function() {
        var self = this;
        // open
        this.button.addEventListener( 'click', function() { self.toggle(); } );
        // close
        if( this.options.closeEl !== '' ) {
          var closeEl = this.el.querySelector( this.options.closeEl );
          if( closeEl ) {
            closeEl.addEventListener( 'click', function() { self.toggle(); } );
          }
        }
      }

      UIMorphingButton.prototype.toggle = function() {
        if( this.isAnimating ) return false;

        // callback
        if( this.expanded ) {
          this.options.onBeforeClose();
        }
        else {
          // add class active (solves z-index problem when more than one button is in the page)
          classie.addClass( this.el, 'active' );
          this.options.onBeforeOpen();
        }

        this.isAnimating = true;

        var self = this,
        onEndTransitionFn = function( ev ) {
          if( ev.target !== this ) return false;

          if( support.transitions ) {
            // open: first opacity then width/height/left/top
            // close: first width/height/left/top then opacity
            if( self.expanded && ev.propertyName !== 'opacity' || !self.expanded && ev.propertyName !== 'width' && ev.propertyName !== 'height' && ev.propertyName !== 'left' && ev.propertyName !== 'top' ) {
              return false;
            }
            this.removeEventListener( transEndEventName, onEndTransitionFn );
          }
          self.isAnimating = false;

          // callback
          if( self.expanded ) {
            // remove class active (after closing)
            classie.removeClass( self.el, 'active' );
            self.options.onAfterClose();
          }
          else {
            self.options.onAfterOpen();
          }

          self.expanded = !self.expanded;
        };

        if( support.transitions ) {
          this.contentEl.addEventListener( transEndEventName, onEndTransitionFn );
        }
        else {
          onEndTransitionFn();
        }

        // set the left and top values of the contentEl (same like the button)
        var buttonPos = this.button.getBoundingClientRect();
        // need to reset
        classie.addClass( this.contentEl, 'no-transition' );
        this.contentEl.style.left = 'auto';
        this.contentEl.style.top = 'auto';

        // add/remove class "open" to the button wraper
        setTimeout( function() {
          self.contentEl.style.left = buttonPos.left + 'px';
          self.contentEl.style.top = buttonPos.top + 'px';

          if( self.expanded ) {
            classie.removeClass( self.contentEl, 'no-transition' );
            classie.removeClass( self.el, 'open' );
          }
          else {
            setTimeout( function() {
              classie.removeClass( self.contentEl, 'no-transition' );
              classie.addClass( self.el, 'open' );
            }, 25 );
          }
        }, 25 );
      }

      // add to global namespace
      window.UIMorphingButton = UIMorphingButton;

    })( window );
  </script>
  <div class="morph-button morph-button-sidebar morph-button-fixed">
    <button type="button"><span class="icon icon-cog">Settings Menu</span></button>
    <div class="morph-content">
      <div>
        <div class="content-style-sidebar">
          <span class="icon icon-close">Close the overlay</span>
          <h2>Settings</h2>
          <ul>
            <li><a class="icon icon-camera" href="#">Default filters</a></li>
            <li><a class="icon icon-server" href="#">Storage Use</a></li>
            <li><a class="icon icon-heart" href="#">Favorites</a></li>
            <li><a class="icon icon-zoom-in" href="#">Readability</a></li>
            <li><a class="icon icon-microphone" href="#">Speech</a></li>
            <li><a class="icon icon-cloud" href="#">Uploads</a></li>
            <li><a class="icon icon-user" href="#">Profile</a></li>
            <li><a class="icon icon-briefcase" href="#">Documents</a></li>
            <li><a class="icon icon-globe" href="#">Global Options</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div><!-- morph-button -->
  <script>
    (function() {
      var docElem = window.document.documentElement, didScroll, scrollPosition;

      // trick to prevent scrolling when opening/closing button
      function noScrollFn() {
        window.scrollTo( scrollPosition ? scrollPosition.x : 0, scrollPosition ? scrollPosition.y : 0 );
      }

      function noScroll() {
        window.removeEventListener( 'scroll', scrollHandler );
        window.addEventListener( 'scroll', noScrollFn );
      }

      function scrollFn() {
        window.addEventListener( 'scroll', scrollHandler );
      }

      function canScroll() {
        window.removeEventListener( 'scroll', noScrollFn );
        scrollFn();
      }

      function scrollHandler() {
        if( !didScroll ) {
          didScroll = true;
          setTimeout( function() { scrollPage(); }, 60 );
        }
      };

      function scrollPage() {
        scrollPosition = { x : window.pageXOffset || docElem.scrollLeft, y : window.pageYOffset || docElem.scrollTop };
        didScroll = false;
      };

      scrollFn();

      var el = document.querySelector( '.morph-button' );

      new UIMorphingButton( el, {
        closeEl : '.icon-close',
        onBeforeOpen : function() {
          // don't allow to scroll
          noScroll();
        },
        onAfterOpen : function() {
          // can scroll again
          canScroll();
          // add class "noscroll" to body
          classie.addClass( document.body, 'noscroll' );
          // add scroll class to main el
          classie.addClass( el, 'scroll' );
        },
        onBeforeClose : function() {
          // remove class "noscroll" to body
          classie.removeClass( document.body, 'noscroll' );
          // remove scroll class from main el
          classie.removeClass( el, 'scroll' );
          // don't allow to scroll
          noScroll();
        },
        onAfterClose : function() {
          // can scroll again
          canScroll();
        }
      } );
    })();
  </script>


  <% else %>


    <h1><%= image_tag 'simpsons.png', class:"articles-index-nothing-yet-pic-1" %> <%= image_tag 'simpsons.png', class:"articles-index-nothing-yet-pic-2" %></h1>

    <% if can? :create, Article %>
      <h1 class="spinner">
        <%= link_to 'Create a New Article', new_article_path, class: 'btn btn-success' %>
      </h1><!--. spinner -->
    <% end %>

    <h2 class="page-header" align="left">Bubbles</h2>
    <div class="bubbles">
      <ul class="bubbles-list">
        <li><a href= "http://www.couriernewjersey.com/tony-php/tony.php" target="_blank"><%= image_tag 'simpsons.png', class:'welcome-pic-1' %></a></li>
        <li><a href= "http://www.couriernewjersey.com/asbury-game-html5/asbury.html" target="_blank"><%= image_tag 'simpsons.png', class:'welcome-pic-1' %></a></li>
        <li><a href= "https://github.com/CMBmaseda" target="_blank"><%= image_tag 'simpsons.png', class:'welcome-pic-1' %></a></li>
        <li><a href= "http://www.couriernewjersey.com/tony-php/tony.php" target="_blank"><%= image_tag 'simpsons.png', class:'welcome-pic-1' %></a></li>
        <li><a href= "http://www.couriernewjersey.com/asbury-game-html5/asbury.html" target="_blank"><%= image_tag 'simpsons.png', class:'welcome-pic-1' %></a></li>
        <li><a href= "https://github.com/CMBmaseda" target="_blank"><%= image_tag 'simpsons.png', class:'welcome-pic-1' %></a></li>
      </ul><!--. bubbles-list -->
    </div><!--. bubbles -->

    <h2 class="page-header" align="left">iHover</h2>

    <!-- Left to right-->
    <div class="row" align="center">
      <div class="col-sm-6">
        <!-- normal -->
        <div class="ih-item square effect11 left_to_right"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end normal -->
      </div>
      <div class="col-sm-6">
        <!-- colored -->
        <div class="ih-item square colored effect11 left_to_right"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end colored -->
      </div>
    </div><!-- End Row -->
    <!-- end Left to right-->
    <!-- Right to left-->
    <div class="row" align="center">
      <div class="col-sm-6">
        <!-- normal -->
        <div class="ih-item square effect11 right_to_left"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end normal -->
      </div>
      <div class="col-sm-6">
        <!-- colored -->
        <div class="ih-item square colored effect11 right_to_left"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end colored -->
      </div>
    </div><!-- End Row -->
    <!-- end Right to left-->
    <!-- Left to right-->
    <div class="row" align="center">
      <div class="col-sm-6">
        <!-- normal -->
        <div class="ih-item square effect11 top_to_bottom"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end normal -->
      </div>
      <div class="col-sm-6">
        <!-- colored -->
        <div class="ih-item square colored effect11 top_to_bottom"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end colored -->
      </div>
    </div><!-- End Row -->
    <!-- end Left to right-->
    <!-- Right to left-->
    <div class="row" align="center">
      <div class="col-sm-6">
        <!-- normal -->
        <div class="ih-item square effect11 bottom_to_top"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end normal -->
      </div>
      <div class="col-sm-6">
        <!-- colored -->
        <div class="ih-item square colored effect11 bottom_to_top"><a href="#">
          <%= image_tag 'simpsons.png', class:"img" %>
          <div class="info">
            <h3>Heading here</h3>
            <p>Description goes here</p>
          </div></a>
        </div>
        <!-- end colored -->
      </div>
    </div><!-- End Row -->
    <!-- end Right to left-->


  <% end %>

</div><!--. articles -->
