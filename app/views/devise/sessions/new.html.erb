<div class="devise-center">

  <h1 class="page-header" align="center" style="margin-bottom: 60px;">Rails Blog</h1>

  <section>
    <div class="morph-button morph-button-modal morph-button-modal-2 morph-button-fixed" style="margin-bottom: 60px;">
      <button type="button">Log In</button>
      <div class="morph-content">
        <div>
          <div class="content-style-form content-style-form-1">
            <span class="icon icon-close">Close the dialog</span>
            <h2>Log In</h2>
              <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
                <div>
                  <%= f.label :email %><br />
                  <%= f.email_field :email, autofocus: true %>
                </div>
                <div><%= f.label :password %><br />
                  <%= f.password_field :password, autocomplete: "on" %></div>
                    <% if devise_mapping.rememberable? -%>
                      <%= f.label :remember_me, class: 'checkbox' do %>
                      <%= f.check_box :remember_me %> Remember me
                    <% end %>
                  <% end -%>
                <div><%= f.submit "Log In", class: 'btn btn-default' %></div>
                <br><%= link_to "Forgot your password?", new_password_path(resource_name), class: 'btn btn-primary' %>
              <% end %>
          </div>
        </div>
      </div>
    </div><!-- morph-button -->
    <br>
    <div class="morph-button morph-button-modal morph-button-modal-3 morph-button-fixed">
      <button type="button">Sign Up</button>
        <div class="morph-content">
          <div>
          <div class="content-style-form content-style-form-2">
            <span class="icon icon-close">Close the dialog</span>
            <h2>Sign Up</h2>
              <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
              <%= devise_error_messages! %>
                <div><%= f.label :first_name %><br />
                <%= f.text_field :first_name, autofocus: true %></div>
                <div><%= f.label :last_name %><br />
                <%= f.text_field :last_name, autofocus: true %></div>
                <div><%= f.label :email %><br />
                <%= f.email_field :email, autofocus: true %></div>
                <div><%= f.label :password %> <% if @validatable %><i>(<%= @minimum_password_length %> characters minimum)</i><% end %><br />
                <%= f.password_field :password, autocomplete: "off" %></div>
                <div><%= f.label :password_confirmation %><br />
                <%= f.password_field :password_confirmation, autocomplete: "off" %></div>
                <br><div><%= f.submit "Sign Up", class: 'btn btn-default' %></div><br>
              <% end %>
          </div>
        </div>
      </div>
    </div><!-- morph-button -->
  </section>
  <script>
  (function() {
    var docElem = window.document.documentElement, didScroll, scrollPosition;

    // trick to prevent scrolling when opening/closing button
    function noScrollFn() {
      window.scrollTo( scrollPosition ? scrollPosition.x : 0, scrollPosition ? scrollPosition.y : 0 );
    }

    function noScroll() {
      window.removeEventListener( 'scroll', scrollHandler );
      window.addEventListener( 'scroll', noScrollFn );
    }

    function scrollFn() {
      window.addEventListener( 'scroll', scrollHandler );
    }

    function canScroll() {
      window.removeEventListener( 'scroll', noScrollFn );
      scrollFn();
    }

    function scrollHandler() {
      if( !didScroll ) {
        didScroll = true;
        setTimeout( function() { scrollPage(); }, 60 );
      }
    };

    function scrollPage() {
      scrollPosition = { x : window.pageXOffset || docElem.scrollLeft, y : window.pageYOffset || docElem.scrollTop };
      didScroll = false;
    };

    scrollFn();

    [].slice.call( document.querySelectorAll( '.morph-button' ) ).forEach( function( bttn ) {
      new UIMorphingButton( bttn, {
        closeEl : '.icon-close',
        onBeforeOpen : function() {
          // don't allow to scroll
          noScroll();
        },
        onAfterOpen : function() {
          // can scroll again
          canScroll();
        },
        onBeforeClose : function() {
          // don't allow to scroll
          noScroll();
        },
        onAfterClose : function() {
          // can scroll again
          canScroll();
        }
      } );
    } );

    // for demo purposes only
    [].slice.call( document.querySelectorAll( 'form button' ) ).forEach( function( bttn ) {
      bttn.addEventListener( 'click', function( ev ) { ev.preventDefault(); } );
    } );
  })();
  </script>

</div><!--. devise-center -->
